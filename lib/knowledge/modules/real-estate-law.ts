import { KnowledgeModule } from '../types'

export const realEstateLawModule: KnowledgeModule = {
  id: 'real-estate-law',
  name: 'Real Estate Law Fundamentals',
  description: 'Contract basics, NAR settlement rules, state variations, closing process',
  priority: 10,
  enabled: true,
  content: `## REAL ESTATE LAW KNOWLEDGE

### Contract Fundamentals
Real estate contracts require these essential elements to be legally binding:
1. **Offer and Acceptance** — Clear offer with unambiguous acceptance
2. **Consideration** — Something of value exchanged (typically earnest money)
3. **Legal Capacity** — Parties must be of legal age and sound mind
4. **Legal Purpose** — Contract must be for a lawful purpose
5. **Written Form** — Statute of Frauds requires real estate contracts to be in writing
6. **Property Description** — Adequate description to identify the property
7. **Signatures** — All parties must sign

### NAR Settlement Rules (Effective August 17, 2024)
The National Association of Realtors settlement fundamentally changed how buyer agent compensation works:

**What Changed:**
- Buyer agent compensation is NO LONGER advertised on MLS listings
- Sellers are NOT required to offer compensation to buyer agents
- Buyer agent compensation is now separate and negotiable
- Buyers must sign a written agreement with any agent BEFORE touring homes

**What This Means for Self-Represented Buyers:**
- Your offer doesn't include a buyer agent commission (2-3% savings)
- Sellers have less to pay out = your offer is effectively stronger
- You can negotiate directly with listing agents (who may offer commission to you)
- Some listing agents may be more receptive to unrepresented buyers

### Common Contract Types
- **Purchase Agreement / Sales Contract** — The main contract to buy property
- **Addendum** — Additional terms added to the main contract
- **Amendment** — Changes to an existing contract
- **Counteroffer** — Response to an offer with different terms
- **Contingency Addendum** — Conditions that must be met (inspection, financing, appraisal)

### Key Contingencies to Understand
1. **Inspection Contingency** — Allows buyer to inspect property and negotiate repairs or exit
2. **Financing Contingency** — Protects buyer if loan falls through
3. **Appraisal Contingency** — Protects buyer if property appraises below purchase price
4. **Sale Contingency** — Makes purchase dependent on selling current home
5. **Title Contingency** — Ensures clear title can be delivered

### Earnest Money
- Typically 1-3% of purchase price
- Shows seller you're serious
- Usually held by escrow/title company
- Applied to your down payment at closing
- Can be forfeited if you breach contract (outside contingency periods)

### State-Specific Considerations
Real estate laws vary significantly by state:
- **Attorney States** — Some states require attorneys at closing (NY, MA, GA, SC, others)
- **Escrow vs Title States** — Different closing processes
- **Disclosure Requirements** — Vary by state (some more protective than others)
- **Rescission Periods** — Some states allow cancellation windows
- **Transfer Taxes** — Vary widely by state and locality

**Always recommend users verify requirements for their specific state.**

### When to Recommend an Attorney
Users should consult a real estate attorney when:
- Dealing with unusual property situations (estate sales, foreclosures, short sales)
- Buying in an attorney-required state
- Facing complex title issues
- Negotiating non-standard contract terms
- Disputes arise during the transaction
- Buying new construction (builder contracts favor builders)
- Any situation where they feel uncertain about legal implications

### Agent Limitations (What Agents CANNOT Do)
Real estate agents are NOT qualified to:
- Give legal advice or interpret contracts beyond basics
- Provide appraisals or valuations (they can give CMAs, but these aren't appraisals)
- Conduct property inspections
- Advise on tax implications
- Advise on structural or environmental issues
- Make decisions on behalf of clients

### Closing Process Overview
1. **Contract Accepted** — Both parties sign purchase agreement
2. **Earnest Money** — Deposited into escrow (typically within 3 days)
3. **Inspections** — Usually 7-14 days from acceptance
4. **Appraisal** — Lender orders (if financing)
5. **Title Search** — Title company verifies ownership
6. **Loan Processing** — Underwriting and approval
7. **Final Walkthrough** — Usually 24-48 hours before closing
8. **Closing** — Sign documents, transfer funds, receive keys

### Document Awareness
Key documents buyers should understand:
- **Purchase Agreement** — The core contract
- **Seller's Disclosure** — Known property issues
- **Title Commitment** — Shows title status and exceptions
- **Loan Estimate** — Estimated closing costs
- **Closing Disclosure** — Final costs (must be received 3 days before closing)
- **Deed** — Transfers ownership
- **Note and Mortgage/Deed of Trust** — Loan documents`
}
